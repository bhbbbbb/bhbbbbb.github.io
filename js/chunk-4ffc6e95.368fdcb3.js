(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ffc6e95","chunk-fd23a2e2"],{"023a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-timeline",{staticStyle:{"margin-left":"-20px"},attrs:{dense:"","align-top":""}},[t._l(t.content,(function(e,i){return n("v-timeline-item",{key:i,attrs:{small:"","fill-dot":"",color:e.finished?"#9BA2AA":"#C4C4C4"},scopedSlots:t._u([{key:"icon",fn:function(){return[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.hover;return[n("v-avatar",{attrs:{size:"28"},on:{click:function(e){return t.finish(i)}}},[t.check_display({idx:i,hover:o})?n("v-icon",{attrs:{small:""}},[t._v("mdi-check")]):t._e()],1)]}}],null,!0)})]},proxy:!0}],null,!0)},[n("v-row",{staticClass:"flex-nowrap",attrs:{"no-gutters":""}},[n("v-col",{staticClass:"d-flex justify-end pr-4",attrs:{cols:"1"}},[n("v-tooltip",{attrs:{right:"","open-delay":"300"},scopedSlots:t._u([{key:"activator",fn:function(i){var o=i.on,s=i.attrs;return[n("span",t._g(t._b({staticClass:"subtitle-2 text--disabled"},"span",s,!1),o),[t._v(t._s(t.moment(e.estDate).format("M/D")))])]}}],null,!0)},[n("span",[t._v(t._s(t.moment(e.estDate).format("YYYY/MM/DD")))])])],1),n("v-col",{attrs:{cols:"10"}},[t.editing_title!==i?n("span",{staticClass:"d-flex text-no-wrap",staticStyle:{"overflow-x":"hidden"},attrs:{"hide-details":""},on:{click:function(e){return t.startTitle(i)}}},[t._v(t._s(e.title))]):n("v-text-field",{staticClass:"pa-0 ma-0",attrs:{placeholder:"輸入標題",id:"title-input"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.endTitle(i)},blur:function(e){return t.endTitle(i)}},model:{value:t.title_model,callback:function(e){t.title_model=e},expression:"title_model"}})],1),n("v-col",{staticClass:"d-flex align-self-start",attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){return t.del(i)}}},[n("v-icon",{attrs:{small:""}},[t._v("mdi-close")])],1)],1)],1),n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{staticClass:"d-flex align-center",staticStyle:{height:"20px"},attrs:{cols:"1"}},[n("v-icon",{attrs:{small:""},on:{click:function(e){return t.expand(i)}}},[t._v(t._s(t.expanded[i]?"mdi-chevron-down":"mdi-chevron-right"))])],1),n("v-col",{staticClass:"ellipsis d-flex align-center",style:t.expanded[i]?"":"height: 20px;",attrs:{cols:"10"}},[e.body&&t.editing_body!==i?n("span",{staticClass:"caption",class:{"text-nowrap":!t.expanded[i],"text-pre-wrap":t.expanded[i]},on:{click:function(e){return t.startBody(i)}}},[t._v(t._s(e.body))]):e.body||t.editing_body===i?n("v-textarea",{staticClass:"pa-0 ma-0",attrs:{placeholder:"新增註解",id:"body-input",rows:"1","auto-grow":"","hide-details":""},on:{blur:function(e){return t.endBody(i)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.endBody(i)}},model:{value:t.body_model,callback:function(e){t.body_model=e},expression:"body_model"}}):n("v-btn",{staticClass:"ma-0 pa-0",attrs:{text:"",depressed:"",plain:"",ripple:!1},on:{click:function(e){return t.startBody(i)}}},[n("span",{staticClass:"caption"},[t._v("+新增註解")])])],1)],1)],1)})),t.$store.state.user.self.id===t.authorId?n("NewMilestone",{on:{created:t.addMilestone}}):t._e()],2)},o=[],s=n("53ca"),a=(n("d3b7"),n("3ca3"),n("ddb0"),n("a434"),n("c1df")),r=n.n(a),c=n("c689"),l=1,d=2,u={name:"MilestonesEdit",components:{NewMilestone:function(){return Promise.all([n.e("chunk-6566656e"),n.e("chunk-0e7c157d")]).then(n.bind(null,"b8dd"))}},props:{content:{type:Array,required:!0},authorId:{type:String,required:!0}},data:function(){return{editing_body:!1,editing_title:!1,try_focus_body:!1,try_focus_title:!1,body_model:void 0,title_model:void 0,expanded:{}}},computed:{},created:function(){},updated:function(){this.doFocus()},methods:{addMilestone:function(t){for(var e=new Date(t.estDate),n=0,i=this.content.length-1;i>=0;i--){var o=this.content[i].estDate;if(Object(s["a"])(o)===Object(s["a"])("string")&&(this.content[i].estDate=new Date(o),o=this.content[i].estDate),o.valueOf()<=e){n=i+1;break}}t.type=d,this.content.splice(n,0,t),this.$forceUpdate()},del:function(t){this.content[t].type!==d&&this.$emit("deleted",this.content[t]._id),this.content.splice(t,1)},finish:function(t){this.content[t].type!==d&&(this.content[t].type=l),this.content[t].finished=!this.content[t].finished,this.$forceUpdate()},check_display:function(t){var e=t.idx,n=t.hover,i=this.content[e].finished||n;return this.$store.state.user.self.id===this.authorId&&i},moment:r.a,color_list:c["b"],startBody:function(t){this.editing_body=t,this.body_model=this.content[t].body,this.try_focus_body=!0,this.expand(t,!0)},endBody:function(t){this.editing_body=!1,this.body_model&&this.content[t].body!==this.body_model?(this.content[t].body=this.body_model,this.content[t].type!==d&&(this.content[t].type=l)):this.expanded[t]=!1},startTitle:function(t){this.editing_title=t,this.title_model=this.content[t].title,this.try_focus_title=!0},endTitle:function(t){this.editing_title=!1,this.title_model&&this.title_model!==this.content[t].title&&(this.content[t].title=this.title_model,this.content[t].type!==d&&(this.content[t].type=l))},doFocus:function(){this.try_focus_body?(document.getElementById("body-input").focus(),this.try_focus_body=!1):this.try_focus_title&&(document.getElementById("title-input").focus(),this.try_focus_title=!1)},expand:function(t,e){void 0===this.expanded[t]&&!1!==e?this.$set(this.expanded,t,!0):this.expanded[t]=void 0===e?!this.expanded[t]:e}}},h=u,f=(n("a820"),n("2877")),p=n("6544"),v=n.n(p),y=n("8212"),_=n("8336"),m=n("62ad"),b=n("ce87"),x=n("132d"),g=n("0fd9"),w=n("8654"),k=n("a844"),I=n("8414"),C=n("1e06"),B=n("3a2f"),T=Object(f["a"])(h,i,o,!1,null,null,null);e["default"]=T.exports;v()(T,{VAvatar:y["a"],VBtn:_["a"],VCol:m["a"],VHover:b["a"],VIcon:x["a"],VRow:g["a"],VTextField:w["a"],VTextarea:k["a"],VTimeline:I["a"],VTimelineItem:C["a"],VTooltip:B["a"]})},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},1681:function(t,e,n){},"8dd90":function(t,e,n){},"90a2":function(t,e,n){"use strict";var i=n("53ca");n("7db0");function o(t,e){var n=e.modifiers||{},o=e.value,a="object"===Object(i["a"])(o)?o:{handler:o,options:{}},r=a.handler,c=a.options,l=new IntersectionObserver((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;if(t._observe){if(r&&(!n.quiet||t._observe.init)){var o=Boolean(e.find((function(t){return t.isIntersecting})));r(e,i,o)}t._observe.init&&n.once?s(t):t._observe.init=!0}}),c);t._observe={init:!1,observer:l},l.observe(t)}function s(t){t._observe&&(t._observe.observer.unobserve(t),delete t._observe)}var a={inserted:o,unbind:s};e["a"]=a},a820:function(t,e,n){"use strict";n("8dd90")},a844:function(t,e,n){"use strict";var i=n("5530"),o=(n("a9e3"),n("1681"),n("8654")),s=n("58df"),a=Object(s["a"])(o["a"]);e["a"]=a.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(i["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},o["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,n=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(n,e)+"px"}},genInput:function(){var t=o["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){o["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);