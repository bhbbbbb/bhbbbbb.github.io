(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7500ae1a"],{"0036":function(t,e,s){"use strict";s("52de")},"0160":function(t,e,s){},"1e06":function(t,e,s){"use strict";var i=s("5530"),n=(s("c96a"),s("58df")),o=s("9d26"),a=s("7560"),l=s("a9ad"),r=Object(n["a"])(l["a"],a["a"]);e["a"]=r.extend().extend({name:"v-timeline-item",inject:["timeline"],props:{color:{type:String,default:"primary"},fillDot:Boolean,hideDot:Boolean,icon:String,iconColor:String,large:Boolean,left:Boolean,right:Boolean,small:Boolean},computed:{hasIcon:function(){return!!this.icon||!!this.$slots.icon}},methods:{genBody:function(){return this.$createElement("div",{staticClass:"v-timeline-item__body"},this.$slots.default)},genIcon:function(){return this.$slots.icon?this.$slots.icon:this.$createElement(o["a"],{props:{color:this.iconColor,dark:!this.theme.isDark,small:this.small}},this.icon)},genInnerDot:function(){var t=this.setBackgroundColor(this.color);return this.$createElement("div",Object(i["a"])({staticClass:"v-timeline-item__inner-dot"},t),[this.hasIcon&&this.genIcon()])},genDot:function(){return this.$createElement("div",{staticClass:"v-timeline-item__dot",class:{"v-timeline-item__dot--small":this.small,"v-timeline-item__dot--large":this.large}},[this.genInnerDot()])},genDivider:function(){var t=[];return this.hideDot||t.push(this.genDot()),this.$createElement("div",{staticClass:"v-timeline-item__divider"},t)},genOpposite:function(){return this.$createElement("div",{staticClass:"v-timeline-item__opposite"},this.$slots.opposite)}},render:function(t){var e=[this.genBody(),this.genDivider()];return this.$slots.opposite&&e.push(this.genOpposite()),t("div",{staticClass:"v-timeline-item",class:Object(i["a"])({"v-timeline-item--fill-dot":this.fillDot,"v-timeline-item--before":this.timeline.reverse?this.right:this.left,"v-timeline-item--after":this.timeline.reverse?this.left:this.right},this.themeClasses)},e)}})},3408:function(t,e,s){},"52de":function(t,e,s){},8212:function(t,e,s){"use strict";var i=s("5530"),n=(s("a9e3"),s("3408"),s("a9ad")),o=s("24b2"),a=s("a236"),l=s("80d2"),r=s("58df");e["a"]=Object(r["a"])(n["a"],o["a"],a["a"]).extend({name:"v-avatar",props:{left:Boolean,right:Boolean,size:{type:[Number,String],default:48}},computed:{classes:function(){return Object(i["a"])({"v-avatar--left":this.left,"v-avatar--right":this.right},this.roundedClasses)},styles:function(){return Object(i["a"])({height:Object(l["f"])(this.size),minWidth:Object(l["f"])(this.size),width:Object(l["f"])(this.size)},this.measurableStyles)}},render:function(t){var e={staticClass:"v-avatar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,e),this.$slots.default)}})},8414:function(t,e,s){"use strict";var i=s("5530"),n=(s("0160"),s("58df")),o=s("7560");e["a"]=Object(n["a"])(o["a"]).extend({name:"v-timeline",provide:function(){return{timeline:this}},props:{alignTop:Boolean,dense:Boolean,reverse:Boolean},computed:{classes:function(){return Object(i["a"])({"v-timeline--align-top":this.alignTop,"v-timeline--dense":this.dense,"v-timeline--reverse":this.reverse},this.themeClasses)}},render:function(t){return t("div",{staticClass:"v-timeline",class:this.classes},this.$slots.default)}})},"8bbb":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-timeline",{staticClass:"ml-n10",staticStyle:{width:"100%","min-width":"300px"},attrs:{dense:"","align-top":""}},[t._l(t.content,(function(e,i){return s("v-timeline-item",{key:i,attrs:{small:"",color:e.finished?"#9BA2AA":"#C4C4C4","fill-dot":""},scopedSlots:t._u([{key:"icon",fn:function(){return[s("v-tooltip",{attrs:{bottom:"",disabled:t.finished||t.tooltip_show||t.authorId!==t.$store.state.user.self.id},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hover;return[s("v-avatar",t._g(t._b({attrs:{size:"28"},on:{click:function(e){return t.finish(i)},touchstart:function(e){t.tooltip_show=!0}}},"v-avatar",o,!1),n),[t.check_display({idx:i,hover:a})?s("v-icon",{attrs:{small:""}},[t._v("mdi-check")]):t._e()],1)]}}],null,!0)})]}}],null,!0)},[s("span",[t._v(t._s(e.finished?"取消完成這個子計畫":"完成這個子計畫"))])])]},proxy:!0}],null,!0)},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"d-flex justify-end pr-4",attrs:{cols:"1"}},[s("v-tooltip",{attrs:{right:"","open-delay":"300"},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on,o=i.attrs;return[s("span",t._g(t._b({staticClass:"subtitle-2 text--disabled"},"span",o,!1),n),[t._v(t._s(t.moment(e.estDate).format("M/D")))])]}}],null,!0)},[s("span",[t._v(t._s(t.moment(e.estDate).format("YYYY/MM/DD")))])])],1),s("v-col",{staticClass:"ellipsis",attrs:{cols:"11"}},[s("span",{staticClass:"text-nowrap ellipsis",class:{"text-nowrap":!t.expanded[i],"text-pre-wrap":t.expanded[i]},staticStyle:{width:"100%"}},[t._v(t._s(e.title))])])],1),e.body?s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticStyle:{height:"20px"},attrs:{cols:"1"}},[s("v-icon",{attrs:{small:""},on:{click:function(e){return t.expand(i)}}},[t._v(t._s(t.expanded[i]?"mdi-chevron-down":"mdi-chevron-right"))])],1),s("v-col",{staticClass:"ellipsis",style:t.expanded[i]?"":"height: 20px;",attrs:{cols:"11"}},[s("span",{staticClass:"caption ellipsis",class:{"text-nowrap":!t.expanded[i],"text-pre-wrap":t.expanded[i]}},[t._v(t._s(e.body))])])],1):t._e()],1)})),t.$store.state.user.self.id!==t.authorId||t.newMilestone_show||t.finished?t._e():s("v-timeline-item",{staticClass:"align-center",attrs:{"fill-dot":"",small:"",color:"#C4C4C4"}},[s("v-icon",{attrs:{slot:"icon",small:"",color:"white"},on:{click:function(e){t.newMilestone_show=!0}},slot:"icon"},[t._v("mdi-plus")]),t.$store.state.user.self.id===t.authorId&&t.allFinish()?s("v-btn",{attrs:{rounded:"",color:"#D1D7D7",depressed:""},on:{click:function(e){t.show=!0}}},[t._v("完成計畫")]):t._e()],1),t.$store.state.user.self.id===t.authorId&&t.newMilestone_show&&!t.finished?s("NewMilestone",{on:{created:t.addMilestone}}):t.finished?s("v-timeline-item",{staticClass:"align-center",attrs:{small:"","fill-dot":"",color:"grey"}},[s("v-icon",{attrs:{slot:"icon",small:"",color:"white"},on:{click:function(e){t.newMilestone_show=!0}},slot:"icon"},[t._v("mdi-check")]),s("strong",[t._v("計畫於 "+t._s(t.finished_date)+" 完成")])],1):t._e(),s("MsgBox",{attrs:{value:t.show},on:{"update:value":function(e){t.show=e},confirm:t.archive},scopedSlots:t._u([{key:"confirm",fn:function(){return[s("span",{staticStyle:{color:"red"}},[t._v("確定")])]},proxy:!0}])},[s("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[s("span",{staticClass:"align-center msgtxt"},[t._v("計畫一但完成後就不能再修改")]),s("br")]),s("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[s("span",{staticClass:"align-center msgtxt"},[t._v("確定要完成嗎?")])])],1)],2)},n=[],o=s("53ca"),a=(s("d3b7"),s("3ca3"),s("ddb0"),s("cb29"),s("a434"),s("c1df")),l=s.n(a),r={name:"Milestones",components:{NewMilestone:function(){return Promise.all([s.e("chunk-39048c0e"),s.e("chunk-6566656e"),s.e("chunk-fd23a2e2")]).then(s.bind(null,"b8dd"))},MsgBox:function(){return s.e("chunk-31a225c9").then(s.bind(null,"3a33"))},MilestonesEdit:function(){return Promise.all([s.e("chunk-39048c0e"),s.e("chunk-4ffc6e95")]).then(s.bind(null,"023a"))}},props:{content:{type:Array,required:!0},authorId:{type:String,required:!0},articleId:{type:String,required:!1,default:void 0},finished:{type:Boolean,required:!1,default:!1}},data:function(){return{newMilestone_show:!1,show:!1,check_show:void 0,expanded:{},tooltip_show:!1}},computed:{finished_date:function(){return l()(this.content[this.content.length-1].estDate).format("MM/DD")}},created:function(){this.check_show=Array(this.content.length).fill(!0)},methods:{addMilestone:function(t){for(var e=new Date(t.estDate),s=0,i=this.content.length-1;i>=0;i--){var n=this.content[i].estDate;if(Object(o["a"])(n)===Object(o["a"])("string")&&(this.content[i].estDate=new Date(n),n=this.content[i].estDate),n.valueOf()<=e){s=i+1;break}}this.$store.dispatch("addMilestone",{article_id:this.articleId,insert_idx:s,milestone:t}),this.$forceUpdate()},del:function(t){this.content.splice(t,1)},finish:function(t){if(!this.finished){var e=!this.content[t].finished;this.$store.state.user.self.id===this.authorId&&this.articleId&&this.$store.dispatch("setMilestoneFinished",{article_id:this.articleId,ms_idx:t,value:e}),this.$forceUpdate(),this.check_show[t]=!!e}},check_display:function(t){var e=t.idx,s=t.hover,i=this.content[e].finished||s,n=this.$store.state.user.self.id===this.authorId&&i;return this.check_show&&(n=n&&this.check_show[e]),n},allFinish:function(){var t=!0;if(this.content.length>0){for(var e=this.content.length-1;e>=0;e--)if(!this.content[e].finished){t=!1;break}}else t=!1;return t},archive:function(){this.$store.dispatch("finishArticle",{article_id:this.articleId})},moment:l.a,expand:function(t){void 0===this.expanded[t]?this.$set(this.expanded,t,!0):this.expanded[t]=!this.expanded[t]}}},c=r,d=(s("0036"),s("2877")),h=s("6544"),u=s.n(h),f=s("8212"),v=s("8336"),p=s("62ad"),m=s("ce87"),_=s("132d"),g=s("0fd9"),b=s("8414"),w=s("1e06"),y=s("3a2f"),x=Object(d["a"])(c,i,n,!1,null,null,null);e["default"]=x.exports;u()(x,{VAvatar:f["a"],VBtn:v["a"],VCol:p["a"],VHover:m["a"],VIcon:_["a"],VRow:g["a"],VTimeline:b["a"],VTimelineItem:w["a"],VTooltip:y["a"]})},ce87:function(t,e,s){"use strict";var i=s("16b7"),n=s("f2e7"),o=s("58df"),a=s("d9bd");e["a"]=Object(o["a"])(i["a"],n["a"]).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):(Object(a["c"])("v-hover should only contain a single element",this),t)):(Object(a["c"])("v-hover is missing a default scopedSlot or bound value",this),null);var t}})}}]);